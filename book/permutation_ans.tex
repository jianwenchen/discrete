\chapter{置换}
\begin{Ex}
  设$S(n,k)$表示$S_n$中的恰有$k$个循环的（包括$1-$循环）的置换的个数。证明：
  \begin{equation}
    \label{eq:poly}
    \sum_{k=1}^nS(n,k)x^k = x(x+1)(x+2)\cdots(x+n-1)
  \end{equation}
\end{Ex}
\begin{proof}[证明]
  记式\eqref{eq:poly}右边展开之后$x^k$的系数为$S'(n,k)$，以下证明
  $S'(n,k)=S(n,k)$。

  首先来看$S'(n,k)$的递推关系式。
  
  显然
  \begin{equation}
    \begin{split}
      S'(n,0) = 0\\
      S'(n,n) = 1
    \end{split}
  \end{equation}
  式\eqref{eq:poly}右边按照最后一项展开，得
  \begin{equation}
    \begin{split}
    &x(x+1)(x+2)\cdots(x+n-1)\\
    =&x(x+1)(x+2)\cdots(x+n-2)x\\
    +&x(x+1)(x+2)\cdots(x+n-2)(n-1)
    \end{split}
  \end{equation}
  展开后所得到的第一项中$x^k$的系数为$S'(n-1,k-1)$，第二项中$x^k$的系数为
  $(n-1)S'(n-1,k)$，于是得到
  \begin{equation}
    S'(n,k) = S'(n-1,k-1) + (n-1)S'(n-1,k) \quad (1 \leq k \leq n-1)
  \end{equation}

  接下来看$S(n,k)$的递推关系式。
  
  因为包含$n(n\geq 1)$个元素的置换至少含有１个循环，所以
  \begin{equation}
    S(n,0)=0
  \end{equation}
  又因为如果一个包含$n(n\geq 1)$个元素的置换含有$n$个循环，则每个循环由一个元素
  构成，这样的置换只有一个，所以
  \begin{equation}
    S(n,n)=1
  \end{equation}
  包含$k$个循环的集合$S=\{1,2,\cdots,n\}$的一个置换可以划分为两种类型：（１）元
  素$n$自身构成一个循环置换，这样的置换有$S(n-1,k-1)$个；
  （２）元素$n$至少与其他一个元素位于同一个循环置换中，这样的置换可以由分解为
  $k$个
  循环的集合
  $\{1,2,\cdots, n-1\}$的置换在每个元素$1,2,\cdots,n-1$的左侧添加元素$n$得到，于
  是这样的置换共有$(n-1)S(n-1,k)$个。
  于是得到
\begin{equation}
    S(n,k) = S(n-1,k-1) + (n-1)S(n-1,k) \quad (1 \leq k \leq n-1)
  \end{equation}
由此，我们得到$S(n,k)$和$S'(n,k)$的递推关系式是一致的，因此$S(n,k)=S'(n,k)$。  
\end{proof}
